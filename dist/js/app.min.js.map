{"version":3,"sources":["app.js"],"names":["app","tableView","tableItems","selectedTableItems","page","count","init","this","tableItemGenerator","pageNavigation","clearSelectedItem","changePageCount","i","push","name","type","idNum","created","moment","format","$","html","length","updateTableItems","remove","start","end","Math","min","checked","findIndex","item","dNone","append","updateNavStatus","tableItemSelect","self","on","id","parseInt","attr","substr","index","splice","updateSelectedSection","ceil","addClass","removeClass","console","log","document","addEventListener","e","clsName","target","className","indexOf"],"mappings":"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","file":"app.min.js","sourcesContent":["/* =================================================================== */\r\n/* ---------------------------- Functions ---------------------------- */\r\n/* =================================================================== */\r\n\r\nvar app = {\r\n  tableView: {\r\n    tableItems: [],\r\n    selectedTableItems: [],\r\n    page: 1,\r\n    count: 10\r\n  },\r\n\r\n  /**\r\n   * Initialize function\r\n   */\r\n  init: function () {\r\n    this.tableItemGenerator();\r\n    this.pageNavigation();\r\n    this.clearSelectedItem();\r\n    this.changePageCount();\r\n  },\r\n\r\n  /**\r\n   * Placeholder table item generator\r\n   * Need to replace with API request\r\n   */\r\n  tableItemGenerator: function () {\r\n    // Generate table items\r\n    for (var i = 0; i < 35; i++) {\r\n      this.tableView.tableItems.push({\r\n        name: 'Profile ' + (i + 1),\r\n        type: 'Location',\r\n        idNum: (i + 1),\r\n        created: moment().format('DD/MM/YYYY H:mm A')\r\n      });\r\n    }\r\n\r\n    // Update total number of items\r\n    $('#total').html(this.tableView.tableItems.length);\r\n\r\n    this.updateTableItems();\r\n  },\r\n\r\n  /**\r\n   * Update table items\r\n   */\r\n  updateTableItems: function () {\r\n    $('.table .table__item').remove();\r\n\r\n    // Count start and end item index\r\n    var start = this.tableView.count * (this.tableView.page - 1);\r\n    var end = Math.min(this.tableView.tableItems.length, this.tableView.count * this.tableView.page);\r\n\r\n    for (var i = start; i < end; i++) {\r\n      var index = this.tableView.selectedTableItems.findIndex(function (item) {\r\n        return item === i;\r\n      });\r\n      var checked = (index > -1) ? ' checked' : '';\r\n      var dNone = (this.tableView.selectedTableItems.length > 0) ? ' d-none' : '';\r\n\r\n      var item = '<div class=\"table__item d-flex-between\">\\n' +\r\n        '  <div class=\"flex-1\">\\n' +\r\n        '    <input type=\"checkbox\" id=\"item' + i + '\" class=\"css-checkbox\"' + checked + '/>\\n' +\r\n        '    <label for=\"item' + i + '\" class=\"css-label\"></label>\\n' +\r\n        '  </div>\\n' +\r\n        '  <div class=\"flex-2\">' + this.tableView.tableItems[i].name + '</div>\\n' +\r\n        '  <div class=\"flex-2\">' + this.tableView.tableItems[i].type + '</div>\\n' +\r\n        '  <div class=\"flex-3\">' + this.tableView.tableItems[i].idNum + '</div>\\n' +\r\n        '  <div class=\"flex-4\">' + this.tableView.tableItems[i].created + '</div>\\n' +\r\n        '  <div class=\"flex-4 d-flex-end\">\\n' +\r\n        '    <button class=\"btn table__item__action view' + dNone + '\">View</button>\\n' +\r\n        '    <button class=\"btn table__item__action edit' + dNone + '\">Edit</button>\\n' +\r\n        '    <button class=\"btn table__item__action delete' + dNone + '\" disabled>Delete</button>\\n' +\r\n        '  </div>\\n' +\r\n        '</div>';\r\n      $('.table').append(item);\r\n    }\r\n\r\n    this.updateNavStatus();\r\n    this.tableItemSelect();\r\n  },\r\n\r\n  /**\r\n   * Interaction with table item\r\n   */\r\n  tableItemSelect: function () {\r\n    var self = this;\r\n\r\n    $('.table__item .css-checkbox').on('change', function () {\r\n      var id = parseInt($(this).attr('id').substr(4));\r\n\r\n      // Update selectedTableItems\r\n      if (this.checked) {\r\n        self.tableView.selectedTableItems.push(id);\r\n      } else {\r\n        var index = self.tableView.selectedTableItems.findIndex(function (item) {\r\n          return item === id;\r\n        });\r\n        if (index > -1) {\r\n          self.tableView.selectedTableItems.splice(index, 1);\r\n        }\r\n      }\r\n\r\n      self.updateSelectedSection();\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Table page navigation\r\n   */\r\n  pageNavigation: function () {\r\n    var self = this;\r\n\r\n    $('.page-nav').on('click', function () {\r\n      if ($(this).attr('id') === 'prev') {\r\n        if (self.tableView.page > 1) {\r\n          // Go to previous page\r\n          self.tableView.page -= 1;\r\n        }\r\n      } else {\r\n        if (self.tableView.page < Math.ceil(self.tableView.tableItems.length / self.tableView.count)) {\r\n          // Go to next page\r\n          self.tableView.page += 1;\r\n        }\r\n      }\r\n\r\n      self.updateTableItems();\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Update page navigation status\r\n   */\r\n  updateNavStatus: function () {\r\n    // Update prev/next button status\r\n    if (this.tableView.page === 1) {\r\n      $('#prev').addClass('disabled');\r\n    } else {\r\n      $('#prev').removeClass('disabled');\r\n    }\r\n    if (this.tableView.page === Math.ceil(this.tableView.tableItems.length / this.tableView.count)) {\r\n      $('#next').addClass('disabled');\r\n    } else {\r\n      $('#next').removeClass('disabled');\r\n    }\r\n\r\n    // Update count of items in page\r\n    $('#count').html(Math.min(this.tableView.tableItems.length, this.tableView.count * this.tableView.page) - this.tableView.count * (this.tableView.page - 1));\r\n  },\r\n\r\n  /**\r\n   * Clear selected table items\r\n   */\r\n  clearSelectedItem: function () {\r\n    var self = this;\r\n\r\n    $('#clear_selection').on('click', function () {\r\n      self.tableView.selectedTableItems = [];\r\n\r\n      self.updateTableItems();\r\n      self.updateSelectedSection();\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Show/hide selected/search sections and submit/filter buttons\r\n   */\r\n  updateSelectedSection: function () {\r\n    var count = this.tableView.selectedTableItems.length;\r\n    if (count > 0) {\r\n      $('.section__selected h2').html(count + ' Selected');\r\n      $('.section__search').addClass('d-none');\r\n      $('.section__selected').removeClass('d-none');\r\n      $('.table__item__action').addClass('d-none');\r\n      $('#submit_form').addClass('d-none');\r\n      $('#filter_profiles').removeClass('d-none');\r\n    } else {\r\n      $('.section__search').removeClass('d-none');\r\n      $('.section__selected').addClass('d-none');\r\n      $('.table__item__action').removeClass('d-none');\r\n      $('#submit_form').removeClass('d-none');\r\n      $('#filter_profiles').addClass('d-none');\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Change page count\r\n   */\r\n  changePageCount: function () {\r\n    var self = this;\r\n\r\n    // Show count list\r\n    $('.page-size__current').on('click', function () {\r\n      $(this).addClass('active');\r\n    });\r\n\r\n    // Update page count\r\n    $('.page-size__list__item').on('click', function () {\r\n      var count = parseInt($(this).html());\r\n      $('#current').html(count);\r\n      console.log(count);\r\n      self.tableView.count = count;\r\n      self.tableView.page = 1;\r\n\r\n      self.updateTableItems();\r\n\r\n      $('.page-size__current').removeClass('active');\r\n    });\r\n\r\n    // Hide count list\r\n    document.addEventListener(\"mousedown\", function (e) {\r\n      var clsName = e.target.className;\r\n      if (!clsName || typeof clsName !== 'string' || clsName.indexOf('page-size') === -1) {\r\n        $('.page-size__current').removeClass('active');\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\n$(function () {\r\n  app.init();\r\n});"]}